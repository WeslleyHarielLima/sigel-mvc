<!-- Page Header -->
<div class="sigel-page-header mb-4">
  <div class="sigel-page-title">
    <iconify-icon icon="solar:layers-bold-duotone" class="sigel-page-icon"></iconify-icon>
    <h1 class="sigel-page-title-text">
      <%= t("activerecord.models.g_checklist_veiculo.other", default: "G checklists veículos") %>
    </h1>
  </div>
</div>
<!-- Filtros -->
<div class="mb-4">
  <button class="btn w-100 sigel-card sigel-filter-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#filtrosForm">
    <span class="sigel-filter-title">
      <iconify-icon icon="solar:filter-bold-duotone"></iconify-icon>
      Filtros de Pesquisa
    </span>
    <iconify-icon icon="solar:chevron-down-bold" class="collapse-icon sigel-collapse-icon"></iconify-icon>
  </button>
  <div class="collapse" id="filtrosForm">
    <div class="sigel-card sigel-filter-body">
      <div class="sigel-card-body">
        <%= search_form_for @q, url: g_checklists_veiculos_path, method: :get do |f| %>
          <div class="row g-3">
            <div class="col-lg-3 col-md-6">
              <label class="sigel-form-label"><strong>Vistoria (veículo)</strong></label>
              <%= f.search_field :g_vistoria_veiculo_g_veiculo_placa_cont, class: "form-control sigel-form-control", placeholder: "Placa do veículo..." %>
            </div>
            <div class="col-lg-3 col-md-6">
              <label class="sigel-form-label"><strong>Tipo do item</strong></label>
              <%= f.search_field :g_tipo_item_checklist_descricao_cont, class: "form-control sigel-form-control", placeholder: "Descrição do item..." %>
            </div>
            <div class="col-lg-3 col-md-6">
              <label class="sigel-form-label"><strong>Estado de conservação</strong></label>
              <%= f.search_field :g_estado_conservacao_veiculo_descricao_cont, class: "form-control sigel-form-control", placeholder: "Estado..." %>
            </div>
            <div class="col-lg-3 col-md-6">
              <label class="sigel-form-label"><strong>Resultado</strong></label>
              <%= f.search_field :resultado_cont, class: "form-control sigel-form-control", placeholder: "Resultado..." %>
            </div>
            <div class="col-lg-3 col-md-6">
              <label class="sigel-form-label"><strong>Observação</strong></label>
              <%= f.search_field :observacao_cont, class: "form-control sigel-form-control", placeholder: "Observação..." %>
            </div>
            <div class="col-12 d-flex gap-2">
              <%= f.submit "Aplicar Filtros", class: "btn btn-sigel-primary d-flex align-items-center gap-2" %>
              <%= link_to g_checklists_veiculos_path, class: "btn btn-sigel-outline d-flex align-items-center gap-2" do %>
                <iconify-icon icon="solar:restart-bold-duotone"></iconify-icon>
                Limpar
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<!-- Tabela -->
<div class="sigel-card">
  <div class="sigel-card-header">
    <h5>
      <iconify-icon icon="solar:clipboard-list-bold-duotone" class="me-2"></iconify-icon>
      Lista de Registros
    </h5>
    <span class="badge sigel-badge-count">
      <%= @g_checklists_veiculos.total_count rescue @g_checklists_veiculos.count %> registros
    </span>
  </div>
  <div class="sigel-card-body p-0">
    <% if @g_checklists_veiculos.any? %>
      <div class="table-responsive">
        <table class="table sigel-table mb-0 align-middle">
          <thead>
            <tr>
              <th><%= sort_link(@q, :g_vistoria_veiculo_g_veiculo_placa, "Veículo") %></th>
              <th><%= sort_link(@q, :g_tipo_item_checklist_descricao, "Tipo do item") %></th>
              <th><%= sort_link(@q, :g_estado_conservacao_veiculo_descricao, "Estado conservação") %></th>
              <th><%= sort_link(@q, :resultado, "Resultado") %></th>
              <th><%= sort_link(@q, :observacao, "Observação") %></th>
              <th class="sigel-th-actions">Ações</th>
            </tr>
          </thead>
          <tbody>
            <% @g_checklists_veiculos.each do |g_checklist_veiculo| %>
              <tr>
                <td><%= g_checklist_veiculo.g_vistoria_veiculo&.g_veiculo&.placa %></td>
                <td><%= g_checklist_veiculo.g_tipo_item_checklist&.descricao %></td>
                <td><%= g_checklist_veiculo.g_estado_conservacao_veiculo&.descricao %></td>
                <td><%= g_checklist_veiculo.resultado %></td>
                <td><%= truncate(g_checklist_veiculo.observacao.to_s, length: 50) %></td>
                <td class="sigel-td-actions">
                  <div class="d-inline-flex gap-2 sigel-actions">
                    <%= link_to g_checklist_veiculo_path(g_checklist_veiculo), class: "sigel-action-btn" do %>
                      <iconify-icon icon="solar:eye-bold"></iconify-icon>
                    <% end %>
                    <%= link_to edit_g_checklist_veiculo_path(g_checklist_veiculo), class: "sigel-action-btn" do %>
                      <iconify-icon icon="solar:pen-bold"></iconify-icon>
                    <% end %>
                    <%= button_to g_checklist_veiculo_path(g_checklist_veiculo), method: :delete, form: { data: { turbo_confirm: "Tem certeza?" } }, class: "sigel-action-btn sigel-action-btn-danger" do %>
                      <iconify-icon icon="solar:trash-bin-trash-bold"></iconify-icon>
                    <% end %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <div class="sigel-card-footer">
        <%== pagy_bootstrap_nav(@pagy) if defined?(@pagy) %>
      </div>
    <% else %>
      <div class="sigel-empty-state text-center p-5">
        <h5>Nenhum registro encontrado</h5>
        <p class="text-muted">Cadastre um novo registro para começar</p>
      </div>
    <% end %>
  </div>
</div>
