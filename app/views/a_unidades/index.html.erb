<!-- Page Header -->
<div class="sigel-page-header mb-4">
  <div class="sigel-page-title">
    <iconify-icon icon="solar:layers-bold-duotone" class="sigel-page-icon"></iconify-icon>
    <h1 class="sigel-page-title-text">
      <%= t("activerecord.models.a_unidade.other", default: "A unidades") %>
    </h1>
  </div>
  <%= link_to new_a_unidade_path, class: "btn btn-sigel-primary d-flex align-items-center gap-2" do %>
  <iconify-icon icon="solar:add-circle-bold-duotone"></iconify-icon>
  <span>Novo Registro</span>
  <% end %>
</div>
<!-- Filtros - Colapsável -->
<div class="mb-4">
  <button class="btn w-100 sigel-card sigel-filter-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#filtrosForm">
    <span class="sigel-filter-title">
      <iconify-icon icon="solar:filter-bold-duotone"></iconify-icon>
      Filtros de Pesquisa
    </span>
    <iconify-icon
      icon="solar:chevron-down-bold"
      class="collapse-icon sigel-collapse-icon"
    ></iconify-icon>
  </button>
  <div class="collapse" id="filtrosForm">
    <div class="sigel-card sigel-filter-body">
      <div class="sigel-card-body">
        <%= search_form_for @q, url: a_unidades_path, method: :get do |f| %>
        <div class="row g-3">
          
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>Nome fantasia</strong>
                </label>
                <%= f.search_field :nome_fantasia_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>A orgao</strong>
                </label>
                <%= f.search_field :a_orgao_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>Cnpj</strong>
                </label>
                <%= f.search_field :cnpj_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>Endereco</strong>
                </label>
                <%= f.search_field :endereco_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>Telefone</strong>
                </label>
                <%= f.search_field :telefone_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>A status</strong>
                </label>
                <%= f.search_field :a_status_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>Codigo interno</strong>
                </label>
                <%= f.search_field :codigo_interno_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
            
              <div class="col-lg-3 col-md-6">
                <label class="sigel-form-label">
                  <strong>G municipio</strong>
                </label>
                <%= f.search_field :g_municipio_cont, class: "form-control sigel-form-control", placeholder: "Pesquisar..." %>
              </div>
            
          <div class="col-12 d-flex gap-2">
            <%= f.submit "Aplicar Filtros", class: "btn btn-sigel-primary d-flex align-items-center gap-2" %>
            <%= link_to a_unidades_path, class: "btn btn-sigel-outline d-flex align-items-center gap-2" do %>
            <iconify-icon icon="solar:restart-bold-duotone"></iconify-icon>
            Limpar
            <% end %>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<!-- Tabela de Registros -->
<div class="sigel-card">
  <div class="sigel-card-header">
    <h5>
      <iconify-icon icon="solar:clipboard-list-bold-duotone" class="me-2"></iconify-icon>
      Lista de Registros
    </h5>
    <span class="badge sigel-badge-count">
      <%= @a_unidades.total_count rescue @a_unidades.count %> registros
    </span>
  </div>
  <div class="sigel-card-body p-0">
    <% if @a_unidades.any? %>
    <div class="table-responsive">
      <table class="table sigel-table mb-0 align-middle">
        <thead>
          <tr>
            
              
                <th class="sigel-th">
                  <%= sort_link(@q, :nome_fantasia, "Nome fantasia") %>
                </th>
              
              
                <th class="sigel-th">
                  <%= sort_link(@q, :a_orgao, "A orgao") %>
                </th>
              
              
                <th class="sigel-th">
                  <%= sort_link(@q, :cnpj, "Cnpj") %>
                </th>
              
              
                <th class="sigel-th">
                  <%= sort_link(@q, :endereco, "Endereco") %>
                </th>
              
              
                <th class="sigel-th">
                  <%= sort_link(@q, :telefone, "Telefone") %>
                </th>
              
              
                <th class="sigel-th">
                  <%= sort_link(@q, :a_status, "A status") %>
                </th>
              
              
                <th class="sigel-th">
                  <%= sort_link(@q, :codigo_interno, "Codigo interno") %>
                </th>
              
              
                <th class="sigel-th">
                  <%= sort_link(@q, :g_municipio, "G municipio") %>
                </th>
              
            <th class="sigel-th-actions">Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @a_unidades.each do |a_unidade| %>
          <tr class="sigel-table-row">
            
              
                <td>
                  <%= truncate(a_unidade.nome_fantasia.to_s) %>
                </td>
              
              
                <td>
                  <%= truncate(a_unidade.a_orgao.to_s) %>
                </td>
              
              
                <td>
                  <%= truncate(a_unidade.cnpj.to_s) %>
                </td>
              
              
                <td>
                  <%= truncate(a_unidade.endereco.to_s) %>
                </td>
              
              
                <td>
                  <%= truncate(a_unidade.telefone.to_s) %>
                </td>
              
              
                <td>
                  <%= truncate(a_unidade.a_status.to_s) %>
                </td>
              
              
                <td>
                  <%= truncate(a_unidade.codigo_interno.to_s) %>
                </td>
              
              
                <td>
                  <%= truncate(a_unidade.g_municipio.to_s) %>
                </td>
              
            <td class="sigel-td-actions">
              <div class="d-inline-flex gap-2 sigel-actions">
                <%= link_to a_unidade_path(a_unidade), class: "sigel-action-btn", title: "Visualizar" do %>
                <iconify-icon icon="solar:eye-bold"></iconify-icon>
                <% end %>
                <%= link_to edit_a_unidade_path(a_unidade), class: "sigel-action-btn", title: "Editar" do %>
                <iconify-icon icon="solar:pen-bold"></iconify-icon>
                <% end %>
                <button type="button" class="sigel-action-btn sigel-action-btn-danger js-open-delete-modal" data-delete-url="<%= a_unidade_path(a_unidade) %>">
                  <iconify-icon icon="solar:trash-bin-trash-bold"></iconify-icon>
                </button>
              </div>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <!-- Paginação -->
    <div class="sigel-card-footer">
      <div class="d-flex justify-content-between align-items-center">
        <div class="text-muted">
          Exibindo <strong><%= @a_unidades.size %></strong> de
          <strong><%= @a_unidades.total_count rescue @a_unidades.count %></strong> registros
        </div>
        <div>
          <% if defined?(@pagy) && @pagy.pages > 1 %>
          <%== pagy_bootstrap_nav(@pagy) %>
          <% end %>
        </div>
      </div>
    </div>
    <% else %>
    <div class="sigel-empty-state">
      <iconify-icon icon="solar:folder-open-bold-duotone" class="sigel-empty-icon"></iconify-icon>
      <h5 class="mt-3 sigel-empty-title">Nenhum registro encontrado</h5>
      <p class="text-muted">Cadastre um novo registro para começar</p>
      <%= link_to new_a_unidade_path, class: "btn btn-sigel-primary mt-3" do %>
      <iconify-icon icon="solar:add-circle-bold-duotone" class="me-2"></iconify-icon>
      Novo Registro
      <% end %>
    </div>
    <% end %>
  </div>
</div>
